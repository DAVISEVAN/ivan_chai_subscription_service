  [1m[35m (178.5ms)[0m  [1m[35mCREATE DATABASE "ivan_chai_subscription_service_development" ENCODING = 'unicode'[0m
  [1m[35m (53.4ms)[0m  [1m[35mCREATE DATABASE "ivan_chai_subscription_service_test" ENCODING = 'unicode'[0m
  [1m[35m (43.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "ivan_chai_subscription_service_development"[0m
  [1m[35m (28.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "ivan_chai_subscription_service_test"[0m
  [1m[35m (120.2ms)[0m  [1m[35mCREATE DATABASE "ivan_chai_subscription_service_development" ENCODING = 'unicode'[0m
  [1m[35m (54.0ms)[0m  [1m[35mCREATE DATABASE "ivan_chai_subscription_service_test" ENCODING = 'unicode'[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(874350573350613660)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-09-27 14:14:09.955300', '2024-09-27 14:14:09.955303') RETURNING "key"[0m
Migrating to CreateTeas (20240927135301)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "teas" ("id" bigserial primary key, "title" character varying NOT NULL, "description" text NOT NULL, "temperature" integer NOT NULL, "brew_time" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240927135301') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCustomers (20240927135410)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(874350573350613660)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (45.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "ivan_chai_subscription_service_development"[0m
  [1m[35m (23.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "ivan_chai_subscription_service_test"[0m
  [1m[35m (133.4ms)[0m  [1m[35mCREATE DATABASE "ivan_chai_subscription_service_development" ENCODING = 'unicode'[0m
  [1m[35m (52.5ms)[0m  [1m[35mCREATE DATABASE "ivan_chai_subscription_service_test" ENCODING = 'unicode'[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(874350573350613660)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-09-27 14:15:33.516500', '2024-09-27 14:15:33.516502') RETURNING "key"[0m
Migrating to CreateTeas (20240927135301)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "teas" ("id" bigserial primary key, "title" character varying NOT NULL, "description" text NOT NULL, "temperature" integer NOT NULL, "brew_time" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240927135301') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCustomers (20240927135410)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "customers" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "email" character varying NOT NULL, "address" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_customers_on_email" ON "customers" ("email")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240927135410') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSubscriptions (20240927135524)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "title" character varying NOT NULL, "price" decimal(8,2) NOT NULL, "status" integer DEFAULT 0 NOT NULL, "frequency" character varying NOT NULL, "customer_id" bigint NOT NULL, "tea_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_66eb6b32c1"
FOREIGN KEY ("customer_id")
  REFERENCES "customers" ("id")
, CONSTRAINT "fk_rails_8184821090"
FOREIGN KEY ("tea_id")
  REFERENCES "teas" ("id")
)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_customer_id" ON "subscriptions" ("customer_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_tea_id" ON "subscriptions" ("tea_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240927135524') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(874350573350613660)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (3.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTea Create (2.4ms)[0m  [1m[32mINSERT INTO "teas" ("title", "description", "temperature", "brew_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Green Tea"], ["description", "A refreshing and healthy green tea."], ["temperature", 80], ["brew_time", 3], ["created_at", "2024-09-28 11:03:38.576301"], ["updated_at", "2024-09-28 11:03:38.576301"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTea Create (1.1ms)[0m  [1m[32mINSERT INTO "teas" ("title", "description", "temperature", "brew_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Black Tea"], ["description", "A bold and strong black tea."], ["temperature", 95], ["brew_time", 5], ["created_at", "2024-09-28 11:03:38.581030"], ["updated_at", "2024-09-28 11:03:38.581030"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCustomer Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" = $1 LIMIT $2[0m  [["email", "john.doe@example.com"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["first_name", "John"], ["last_name", "Doe"], ["email", "john.doe@example.com"], ["address", "123 Tea Street, Flavor Town"], ["created_at", "2024-09-28 11:03:38.601049"], ["updated_at", "2024-09-28 11:03:38.601049"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSubscription Create (2.8ms)[0m  [1m[32mINSERT INTO "subscriptions" ("title", "price", "status", "frequency", "customer_id", "tea_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "Monthly Green Tea Subscription"], ["price", "15.0"], ["status", 0], ["frequency", "monthly"], ["customer_id", 1], ["tea_id", 1], ["created_at", "2024-09-28 11:03:38.618030"], ["updated_at", "2024-09-28 11:03:38.618030"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSubscription Create (0.9ms)[0m  [1m[32mINSERT INTO "subscriptions" ("title", "price", "status", "frequency", "customer_id", "tea_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "Weekly Black Tea Subscription"], ["price", "7.5"], ["status", 1], ["frequency", "weekly"], ["customer_id", 1], ["tea_id", 2], ["created_at", "2024-09-28 11:03:38.622255"], ["updated_at", "2024-09-28 11:03:38.622255"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Started POST "/api/v1/customers/1/subscriptions" for ::1 at 2024-09-28 05:07:06 -0600
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SubscriptionsController#create as */*
  Parameters: {"tea_id"=>1, "subscription"=>{"title"=>"Biweekly Green Tea Subscription", "price"=>20.0, "frequency"=>"biweekly"}, "customer_id"=>"1"}
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:42:in `set_customer'
  [1m[36mTea Load (0.3ms)[0m  [1m[34mSELECT "teas".* FROM "teas" WHERE "teas"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:6:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/subscriptions_controller.rb:14:in `create'
  [1m[36mSubscription Create (1.3ms)[0m  [1m[32mINSERT INTO "subscriptions" ("title", "price", "status", "frequency", "customer_id", "tea_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "Biweekly Green Tea Subscription"], ["price", "20.0"], ["status", 0], ["frequency", "biweekly"], ["customer_id", 1], ["tea_id", 1], ["created_at", "2024-09-28 11:07:06.890551"], ["updated_at", "2024-09-28 11:07:06.890551"]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:14:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/subscriptions_controller.rb:14:in `create'
Completed 201 Created in 66ms (Views: 0.2ms | ActiveRecord: 21.0ms | Allocations: 34946)


Started GET "/api/v1/customers/1/subscriptions" for ::1 at 2024-09-28 05:08:00 -0600
Processing by Api::V1::SubscriptionsController#index as */*
  Parameters: {"customer_id"=>"1"}
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:42:in `set_customer'
  [1m[36mSubscription Load (1.6ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions" WHERE "subscriptions"."customer_id" = $1[0m  [["customer_id", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:24:in `index'
Completed 200 OK in 24ms (Views: 4.8ms | ActiveRecord: 2.1ms | Allocations: 1681)


Started PATCH "/api/v1/customers/1/subscriptions/1" for ::1 at 2024-09-28 05:08:59 -0600
Processing by Api::V1::SubscriptionsController#update as */*
  Parameters: {"customer_id"=>"1", "id"=>"1"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:42:in `set_customer'
  [1m[36mSubscription Load (0.4ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions" WHERE "subscriptions"."customer_id" = $1 AND "subscriptions"."id" = $2 LIMIT $3[0m  [["customer_id", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:48:in `set_subscription'
Completed 400 Bad Request in 3ms (ActiveRecord: 0.8ms | Allocations: 1396)


  
ActionController::ParameterMissing (param is missing or the value is empty: subscription):
  
app/controllers/api/v1/subscriptions_controller.rb:54:in `subscription_params'
app/controllers/api/v1/subscriptions_controller.rb:29:in `update'
Started PATCH "/api/v1/customers/1/subscriptions/1" for ::1 at 2024-09-28 05:36:22 -0600
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SubscriptionsController#update as */*
  Parameters: {"subscription"=>{"status"=>"cancelled"}, "customer_id"=>"1", "id"=>"1"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:42:in `set_customer'
  [1m[36mSubscription Load (0.5ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions" WHERE "subscriptions"."customer_id" = $1 AND "subscriptions"."id" = $2 LIMIT $3[0m  [["customer_id", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:48:in `set_subscription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/subscriptions_controller.rb:29:in `update'
  [1m[36mSubscription Update (1.2ms)[0m  [1m[33mUPDATE "subscriptions" SET "status" = $1, "updated_at" = $2 WHERE "subscriptions"."id" = $3[0m  [["status", 1], ["updated_at", "2024-09-28 11:36:22.321561"], ["id", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:29:in `update'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/subscriptions_controller.rb:29:in `update'
Completed 200 OK in 55ms (Views: 0.2ms | ActiveRecord: 27.0ms | Allocations: 25919)


Started GET "/api/v1/customers/1/subscriptions" for ::1 at 2024-09-28 05:37:20 -0600
Processing by Api::V1::SubscriptionsController#index as */*
  Parameters: {"tea_id"=>999, "subscription"=>{"title"=>"Monthly Mystery Tea Subscription", "price"=>10.0, "frequency"=>"monthly"}, "customer_id"=>"1"}
  [1m[36mCustomer Load (3.0ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:42:in `set_customer'
  [1m[36mSubscription Load (0.6ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions" WHERE "subscriptions"."customer_id" = $1[0m  [["customer_id", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:24:in `index'
Completed 200 OK in 28ms (Views: 6.7ms | ActiveRecord: 3.6ms | Allocations: 1677)


Started POST "/api/v1/customers/1/subscriptions" for ::1 at 2024-09-28 05:37:43 -0600
Processing by Api::V1::SubscriptionsController#create as */*
  Parameters: {"tea_id"=>999, "subscription"=>{"title"=>"Monthly Mystery Tea Subscription", "price"=>10.0, "frequency"=>"monthly"}, "customer_id"=>"1"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:42:in `set_customer'
  [1m[36mTea Load (0.4ms)[0m  [1m[34mSELECT "teas".* FROM "teas" WHERE "teas"."id" = $1 LIMIT $2[0m  [["id", 999], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:6:in `create'
Completed 404 Not Found in 34ms (Views: 0.1ms | ActiveRecord: 13.1ms | Allocations: 3954)


Started GET "/api/v1/customers/1/subscriptions/1" for ::1 at 2024-09-28 05:38:29 -0600
  
ActionController::RoutingError (No route matches [GET] "/api/v1/customers/1/subscriptions/1"):
  
Started GET "/api/v1/customers/1/subscriptions" for ::1 at 2024-09-28 05:39:01 -0600
Processing by Api::V1::SubscriptionsController#index as */*
  Parameters: {"customer_id"=>"1"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:42:in `set_customer'
  [1m[36mSubscription Load (0.2ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions" WHERE "subscriptions"."customer_id" = $1[0m  [["customer_id", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:24:in `index'
Completed 200 OK in 16ms (Views: 1.4ms | ActiveRecord: 0.6ms | Allocations: 1399)


Started POST "/api/v1/customers/1/subscriptions" for ::1 at 2024-09-29 07:14:17 -0600
  [1m[36mActiveRecord::SchemaMigration Load (3.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SubscriptionsController#create as */*
  Parameters: {"tea_id"=>1, "subscription"=>{"title"=>"Biweekly Green Tea Subscription", "price"=>20.0, "frequency"=>"biweekly"}, "customer_id"=>"1"}
  [1m[36mCustomer Load (1.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:42:in `set_customer'
  [1m[36mTea Load (0.7ms)[0m  [1m[34mSELECT "teas".* FROM "teas" WHERE "teas"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:6:in `create'
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/subscriptions_controller.rb:14:in `create'
  [1m[36mSubscription Create (8.5ms)[0m  [1m[32mINSERT INTO "subscriptions" ("title", "price", "status", "frequency", "customer_id", "tea_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "Biweekly Green Tea Subscription"], ["price", "20.0"], ["status", 0], ["frequency", "biweekly"], ["customer_id", 1], ["tea_id", 1], ["created_at", "2024-09-29 13:14:17.590056"], ["updated_at", "2024-09-29 13:14:17.590056"]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:14:in `create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/subscriptions_controller.rb:14:in `create'
Completed 201 Created in 86ms (Views: 0.3ms | ActiveRecord: 41.9ms | Allocations: 31286)


Started GET "/api/v1/customers/1/subscriptions" for ::1 at 2024-09-29 07:14:45 -0600
Processing by Api::V1::SubscriptionsController#index as */*
  Parameters: {"customer_id"=>"1"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:42:in `set_customer'
  [1m[36mSubscription Load (1.2ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions" WHERE "subscriptions"."customer_id" = $1[0m  [["customer_id", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:24:in `index'
Completed 200 OK in 9ms (Views: 2.5ms | ActiveRecord: 1.5ms | Allocations: 1754)


Started PATCH "/api/v1/customers/3/subscriptions/1" for ::1 at 2024-09-29 07:15:54 -0600
Processing by Api::V1::SubscriptionsController#update as */*
  Parameters: {"subscription"=>{"status"=>"cancelled"}, "customer_id"=>"3", "id"=>"1"}
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:42:in `set_customer'
Filter chain halted as :set_customer rendered or redirected
Completed 404 Not Found in 3ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 528)


Started PATCH "/api/v1/customers/4/subscriptions/1" for ::1 at 2024-09-29 07:16:32 -0600
Processing by Api::V1::SubscriptionsController#update as */*
  Parameters: {"subscription"=>{"status"=>"cancelled"}, "customer_id"=>"4", "id"=>"1"}
  [1m[36mCustomer Load (1.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:42:in `set_customer'
Filter chain halted as :set_customer rendered or redirected
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 501)


Started POST "/api/v1/customers/1/subscriptions" for ::1 at 2024-09-29 07:16:45 -0600
Processing by Api::V1::SubscriptionsController#create as */*
  Parameters: {"tea_id"=>999, "subscription"=>{"title"=>"Monthly Mystery Tea Subscription", "price"=>10.0, "frequency"=>"monthly"}, "customer_id"=>"1"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:42:in `set_customer'
  [1m[36mTea Load (0.3ms)[0m  [1m[34mSELECT "teas".* FROM "teas" WHERE "teas"."id" = $1 LIMIT $2[0m  [["id", 999], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:6:in `create'
Completed 404 Not Found in 10ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 897)


Started GET "/api/v1/customers/1/subscriptions/1" for ::1 at 2024-09-29 07:16:58 -0600
  
ActionController::RoutingError (No route matches [GET] "/api/v1/customers/1/subscriptions/1"):
  
Started GET "/api/v1/customers/1/subscriptions/1" for ::1 at 2024-09-29 07:30:52 -0600
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SubscriptionsController#show as */*
  Parameters: {"subscription"=>{"status"=>"invalid_status"}, "customer_id"=>"1", "id"=>"1"}
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:48:in `set_customer'
  [1m[36mSubscription Load (0.9ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions" WHERE "subscriptions"."customer_id" = $1 AND "subscriptions"."id" = $2 LIMIT $3[0m  [["customer_id", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:54:in `set_subscription'
  [1m[36mCACHE Subscription Load (0.0ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions" WHERE "subscriptions"."customer_id" = $1 AND "subscriptions"."id" = $2 LIMIT $3[0m  [["customer_id", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:22:in `show'
Completed 200 OK in 51ms (Views: 0.4ms | ActiveRecord: 17.6ms | Allocations: 24168)


Started GET "/api/v1/customers/1/subscriptions" for ::1 at 2024-09-29 07:34:48 -0600
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SubscriptionsController#index as */*
  Parameters: {"customer_id"=>"1"}
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:48:in `set_customer'
  [1m[36mSubscription Load (0.5ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions" WHERE "subscriptions"."customer_id" = $1[0m  [["customer_id", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:30:in `index'
Completed 200 OK in 55ms (Views: 8.2ms | ActiveRecord: 16.8ms | Allocations: 30488)


Started PATCH "/api/v1/customers/4/subscriptions/1" for ::1 at 2024-09-29 07:46:50 -0600
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SubscriptionsController#update as */*
  Parameters: {"subscription"=>{"status"=>"cancelled"}, "customer_id"=>"4", "id"=>"1"}
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:56:in `set_customer'
Filter chain halted as :set_customer rendered or redirected
Completed 404 Not Found in 31ms (Views: 0.1ms | ActiveRecord: 17.3ms | Allocations: 7343)


Started GET "/api/v1/customers/1/subscriptions/1" for ::1 at 2024-09-29 07:48:18 -0600
Processing by Api::V1::SubscriptionsController#show as HTML
  Parameters: {"customer_id"=>"1", "id"=>"1"}
  [1m[36mCustomer Load (21.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:56:in `set_customer'
  [1m[36mSubscription Load (0.6ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions" WHERE "subscriptions"."customer_id" = $1 AND "subscriptions"."id" = $2 LIMIT $3[0m  [["customer_id", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:62:in `set_subscription'
  [1m[36mCACHE Subscription Load (0.0ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions" WHERE "subscriptions"."customer_id" = $1 AND "subscriptions"."id" = $2 LIMIT $3[0m  [["customer_id", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:22:in `show'
Completed 200 OK in 79ms (Views: 0.7ms | ActiveRecord: 25.1ms | Allocations: 19002)


Started GET "/apple-touch-icon-precomposed.png" for ::1 at 2024-09-29 07:48:18 -0600
Started GET "/favicon.ico" for ::1 at 2024-09-29 07:48:18 -0600
  
ActionController::RoutingError (No route matches [GET] "/apple-touch-icon-precomposed.png"):
  
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/apple-touch-icon.png" for ::1 at 2024-09-29 07:48:18 -0600
  
ActionController::RoutingError (No route matches [GET] "/apple-touch-icon.png"):
  
Started DELETE "/api/v1/customers/1/subscriptions/1" for ::1 at 2024-09-29 07:48:48 -0600
Processing by Api::V1::SubscriptionsController#destroy as */*
  Parameters: {"customer_id"=>"1", "id"=>"1"}
  [1m[36mCustomer Load (11.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:56:in `set_customer'
  [1m[36mSubscription Load (0.4ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions" WHERE "subscriptions"."customer_id" = $1 AND "subscriptions"."id" = $2 LIMIT $3[0m  [["customer_id", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:62:in `set_subscription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/subscriptions_controller.rb:46:in `destroy'
  [1m[36mSubscription Destroy (0.9ms)[0m  [1m[31mDELETE FROM "subscriptions" WHERE "subscriptions"."id" = $1[0m  [["id", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:46:in `destroy'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/subscriptions_controller.rb:46:in `destroy'
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 13.9ms | Allocations: 2647)


Started POST "/api/v1/customers/1/subscriptions" for ::1 at 2024-09-29 08:12:56 -0600
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SubscriptionsController#create as */*
  Parameters: {"tea_id"=>1, "subscription"=>{"title"=>"Biweekly Green Tea Subscription", "price"=>20.0, "frequency"=>"biweekly"}, "customer_id"=>"1"}
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:47:in `set_customer'
  [1m[36mTea Load (0.5ms)[0m  [1m[34mSELECT "teas".* FROM "teas" WHERE "teas"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:6:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/services/subscription_service.rb:50:in `save_subscription'
  [1m[36mSubscription Create (1.6ms)[0m  [1m[32mINSERT INTO "subscriptions" ("title", "price", "status", "frequency", "customer_id", "tea_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "Biweekly Green Tea Subscription"], ["price", "20.0"], ["status", 0], ["frequency", "biweekly"], ["customer_id", 1], ["tea_id", 1], ["created_at", "2024-09-29 14:12:57.157587"], ["updated_at", "2024-09-29 14:12:57.157587"]]
  ↳ app/services/subscription_service.rb:50:in `save_subscription'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/services/subscription_service.rb:50:in `save_subscription'
Completed 201 Created in 75ms (Views: 0.1ms | ActiveRecord: 35.1ms | Allocations: 31957)


Started GET "/api/v1/customers/1/subscriptions" for ::1 at 2024-09-29 08:13:56 -0600
Processing by Api::V1::SubscriptionsController#index as */*
  Parameters: {"customer_id"=>"1"}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:47:in `set_customer'
  [1m[36mSubscription Load (1.7ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions" WHERE "subscriptions"."customer_id" = $1[0m  [["customer_id", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:23:in `index'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.9ms | Allocations: 1640)


Started PATCH "/api/v1/customers/1/subscriptions/1" for ::1 at 2024-09-29 08:14:22 -0600
Processing by Api::V1::SubscriptionsController#update as */*
  Parameters: {"subscription"=>{"status"=>"cancelled"}, "customer_id"=>"1", "id"=>"1"}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:47:in `set_customer'
  [1m[36mSubscription Load (0.7ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions" WHERE "subscriptions"."customer_id" = $1 AND "subscriptions"."id" = $2 LIMIT $3[0m  [["customer_id", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:52:in `set_subscription'
Filter chain halted as :set_subscription rendered or redirected
Completed 404 Not Found in 8ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 1281)


Started POST "/api/v1/customers/1/subscriptions" for ::1 at 2024-09-29 08:14:38 -0600
Processing by Api::V1::SubscriptionsController#create as */*
  Parameters: {"tea_id"=>999, "subscription"=>{"title"=>"Monthly Mystery Tea Subscription", "price"=>10.0, "frequency"=>"monthly"}, "customer_id"=>"1"}
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:47:in `set_customer'
  [1m[36mTea Load (0.5ms)[0m  [1m[34mSELECT "teas".* FROM "teas" WHERE "teas"."id" = $1 LIMIT $2[0m  [["id", 999], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:6:in `create'
Completed 404 Not Found in 4ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 902)


Started GET "/api/v1/customers/1/subscriptions/1" for ::1 at 2024-09-29 08:14:47 -0600
Processing by Api::V1::SubscriptionsController#show as */*
  Parameters: {"subscription"=>{"status"=>"invalid_status"}, "customer_id"=>"1", "id"=>"1"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:47:in `set_customer'
  [1m[36mSubscription Load (0.4ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions" WHERE "subscriptions"."customer_id" = $1 AND "subscriptions"."id" = $2 LIMIT $3[0m  [["customer_id", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:52:in `set_subscription'
Filter chain halted as :set_subscription rendered or redirected
Completed 404 Not Found in 5ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1183)


Started DELETE "/api/v1/customers/1/subscriptions/1" for ::1 at 2024-09-29 08:14:53 -0600
Processing by Api::V1::SubscriptionsController#destroy as */*
  Parameters: {"customer_id"=>"1", "id"=>"1"}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:47:in `set_customer'
  [1m[36mSubscription Load (0.2ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions" WHERE "subscriptions"."customer_id" = $1 AND "subscriptions"."id" = $2 LIMIT $3[0m  [["customer_id", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:52:in `set_subscription'
Filter chain halted as :set_subscription rendered or redirected
Completed 404 Not Found in 4ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 1171)


Started POST "/api/v1/customers/1/subscriptions" for ::1 at 2024-09-29 08:24:58 -0600
Processing by Api::V1::SubscriptionsController#create as */*
  Parameters: {"tea_id"=>1, "subscription"=>{"title"=>"Biweekly Green Tea Subscription", "price"=>20.0, "frequency"=>"biweekly"}, "customer_id"=>"1"}
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:47:in `set_customer'
  [1m[36mTea Load (0.4ms)[0m  [1m[34mSELECT "teas".* FROM "teas" WHERE "teas"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:6:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/services/subscription_service.rb:50:in `save_subscription'
  [1m[36mSubscription Create (1.6ms)[0m  [1m[32mINSERT INTO "subscriptions" ("title", "price", "status", "frequency", "customer_id", "tea_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "Biweekly Green Tea Subscription"], ["price", "20.0"], ["status", 0], ["frequency", "biweekly"], ["customer_id", 1], ["tea_id", 1], ["created_at", "2024-09-29 14:24:59.213379"], ["updated_at", "2024-09-29 14:24:59.213379"]]
  ↳ app/services/subscription_service.rb:50:in `save_subscription'
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/services/subscription_service.rb:50:in `save_subscription'
Completed 201 Created in 44ms (Views: 0.1ms | ActiveRecord: 20.9ms | Allocations: 17783)


  [1m[36mActiveRecord::SchemaMigration Load (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (4.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (68.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "ivan_chai_subscription_service_development"[0m
  [1m[35m (46.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "ivan_chai_subscription_service_test"[0m
  [1m[35m (101.5ms)[0m  [1m[35mCREATE DATABASE "ivan_chai_subscription_service_development" ENCODING = 'unicode'[0m
  [1m[35m (43.3ms)[0m  [1m[35mCREATE DATABASE "ivan_chai_subscription_service_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (1.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "customers" CASCADE[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "customers" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "email" character varying NOT NULL, "address" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_customers_on_email" ON "customers" ("email")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "title" character varying NOT NULL, "price" decimal(8,2) NOT NULL, "status" integer DEFAULT 0 NOT NULL, "frequency" character varying NOT NULL, "customer_id" bigint NOT NULL, "tea_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_customer_id" ON "subscriptions" ("customer_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_tea_id" ON "subscriptions" ("tea_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "teas" CASCADE[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "teas" ("id" bigserial primary key, "title" character varying NOT NULL, "description" text NOT NULL, "temperature" integer NOT NULL, "brew_time" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_66eb6b32c1"
FOREIGN KEY ("customer_id")
  REFERENCES "customers" ("id")
[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_8184821090"
FOREIGN KEY ("tea_id")
  REFERENCES "teas" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20240927135524)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20240927135410),
(20240927135301);[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-09-30 10:49:56.436823', '2024-09-30 10:49:56.436826') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '7e22e0cb923796294d56a72c044c4047de7302ab', '2024-09-30 10:49:56.438741', '2024-09-30 10:49:56.438742') RETURNING "key"[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "customers" CASCADE[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "customers" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "email" character varying NOT NULL, "address" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_customers_on_email" ON "customers" ("email")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "title" character varying NOT NULL, "price" decimal(8,2) NOT NULL, "status" integer DEFAULT 0 NOT NULL, "frequency" character varying NOT NULL, "customer_id" bigint NOT NULL, "tea_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_customer_id" ON "subscriptions" ("customer_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_tea_id" ON "subscriptions" ("tea_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "teas" CASCADE[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "teas" ("id" bigserial primary key, "title" character varying NOT NULL, "description" text NOT NULL, "temperature" integer NOT NULL, "brew_time" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_66eb6b32c1"
FOREIGN KEY ("customer_id")
  REFERENCES "customers" ("id")
[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_8184821090"
FOREIGN KEY ("tea_id")
  REFERENCES "teas" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20240927135524)[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20240927135410),
(20240927135301);[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-09-30 10:49:56.467245', '2024-09-30 10:49:56.467246') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2024-09-30 10:49:56.468321' WHERE "ar_internal_metadata"."key" = 'environment'[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '7e22e0cb923796294d56a72c044c4047de7302ab', '2024-09-30 10:49:56.469157', '2024-09-30 10:49:56.469157') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
  [1m[36mTea Load (0.1ms)[0m  [1m[34mSELECT "teas".* FROM "teas"[0m
  [1m[36mSubscription Load (0.2ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCustomer Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" = $1 LIMIT $2[0m  [["email", "john@example.com"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["first_name", "John"], ["last_name", "Doe"], ["email", "john@example.com"], ["address", "123 Tea St."], ["created_at", "2024-09-30 10:49:56.500505"], ["updated_at", "2024-09-30 10:49:56.500505"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" = $1 LIMIT $2[0m  [["email", "jane@example.com"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["first_name", "Jane"], ["last_name", "Smith"], ["email", "jane@example.com"], ["address", "456 Coffee Rd."], ["created_at", "2024-09-30 10:49:56.503449"], ["updated_at", "2024-09-30 10:49:56.503449"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTea Create (0.7ms)[0m  [1m[32mINSERT INTO "teas" ("title", "description", "temperature", "brew_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Green Tea"], ["description", "A refreshing and healthy green tea."], ["temperature", 80], ["brew_time", 3], ["created_at", "2024-09-30 10:49:56.508401"], ["updated_at", "2024-09-30 10:49:56.508401"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTea Create (0.6ms)[0m  [1m[32mINSERT INTO "teas" ("title", "description", "temperature", "brew_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Black Tea"], ["description", "A strong and bold black tea."], ["temperature", 95], ["brew_time", 4], ["created_at", "2024-09-30 10:49:56.510250"], ["updated_at", "2024-09-30 10:49:56.510250"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSubscription Create (1.0ms)[0m  [1m[32mINSERT INTO "subscriptions" ("title", "price", "status", "frequency", "customer_id", "tea_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "Monthly Green Tea Subscription"], ["price", "15.0"], ["status", 0], ["frequency", "monthly"], ["customer_id", 1], ["tea_id", 1], ["created_at", "2024-09-30 10:49:56.519412"], ["updated_at", "2024-09-30 10:49:56.519412"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSubscription Create (0.7ms)[0m  [1m[32mINSERT INTO "subscriptions" ("title", "price", "status", "frequency", "customer_id", "tea_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "Weekly Black Tea Subscription"], ["price", "10.0"], ["status", 1], ["frequency", "weekly"], ["customer_id", 1], ["tea_id", 2], ["created_at", "2024-09-30 10:49:56.521842"], ["updated_at", "2024-09-30 10:49:56.521842"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Started POST "/api/v1/customers/1/subscriptions" for ::1 at 2024-09-30 04:50:41 -0600
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SubscriptionsController#create as */*
  Parameters: {"tea_id"=>2, "subscription"=>{"title"=>"Daily Black Tea Subscription", "price"=>20.0, "frequency"=>"daily", "status"=>"active"}, "customer_id"=>"1"}
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:47:in `set_customer'
  [1m[36mTea Load (0.3ms)[0m  [1m[34mSELECT "teas".* FROM "teas" WHERE "teas"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:6:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/services/subscription_service.rb:50:in `save_subscription'
  [1m[36mSubscription Create (1.1ms)[0m  [1m[32mINSERT INTO "subscriptions" ("title", "price", "status", "frequency", "customer_id", "tea_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "Daily Black Tea Subscription"], ["price", "20.0"], ["status", 0], ["frequency", "daily"], ["customer_id", 1], ["tea_id", 2], ["created_at", "2024-09-30 10:50:41.253113"], ["updated_at", "2024-09-30 10:50:41.253113"]]
  ↳ app/services/subscription_service.rb:50:in `save_subscription'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/services/subscription_service.rb:50:in `save_subscription'
Completed 201 Created in 68ms (Views: 0.1ms | ActiveRecord: 34.6ms | Allocations: 32031)


  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (59.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "ivan_chai_subscription_service_development"[0m
  [1m[35m (30.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "ivan_chai_subscription_service_test"[0m
  [1m[35m (123.8ms)[0m  [1m[35mCREATE DATABASE "ivan_chai_subscription_service_development" ENCODING = 'unicode'[0m
  [1m[35m (47.9ms)[0m  [1m[35mCREATE DATABASE "ivan_chai_subscription_service_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "customers" CASCADE[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "customers" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "email" character varying NOT NULL, "address" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_customers_on_email" ON "customers" ("email")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "title" character varying NOT NULL, "price" decimal(8,2) NOT NULL, "status" integer DEFAULT 0 NOT NULL, "frequency" character varying NOT NULL, "customer_id" bigint NOT NULL, "tea_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_customer_id" ON "subscriptions" ("customer_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_tea_id" ON "subscriptions" ("tea_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "teas" CASCADE[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "teas" ("id" bigserial primary key, "title" character varying NOT NULL, "description" text NOT NULL, "temperature" integer NOT NULL, "brew_time" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_66eb6b32c1"
FOREIGN KEY ("customer_id")
  REFERENCES "customers" ("id")
[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_8184821090"
FOREIGN KEY ("tea_id")
  REFERENCES "teas" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20240927135524)[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20240927135410),
(20240927135301);[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-09-30 10:53:18.414216', '2024-09-30 10:53:18.414220') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '7e22e0cb923796294d56a72c044c4047de7302ab', '2024-09-30 10:53:18.416118', '2024-09-30 10:53:18.416119') RETURNING "key"[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "customers" CASCADE[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "customers" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "email" character varying NOT NULL, "address" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_customers_on_email" ON "customers" ("email")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "title" character varying NOT NULL, "price" decimal(8,2) NOT NULL, "status" integer DEFAULT 0 NOT NULL, "frequency" character varying NOT NULL, "customer_id" bigint NOT NULL, "tea_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_customer_id" ON "subscriptions" ("customer_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_tea_id" ON "subscriptions" ("tea_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "teas" CASCADE[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "teas" ("id" bigserial primary key, "title" character varying NOT NULL, "description" text NOT NULL, "temperature" integer NOT NULL, "brew_time" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_66eb6b32c1"
FOREIGN KEY ("customer_id")
  REFERENCES "customers" ("id")
[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_8184821090"
FOREIGN KEY ("tea_id")
  REFERENCES "teas" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20240927135524)[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20240927135410),
(20240927135301);[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-09-30 10:53:18.443940', '2024-09-30 10:53:18.443941') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2024-09-30 10:53:18.444954' WHERE "ar_internal_metadata"."key" = 'environment'[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '7e22e0cb923796294d56a72c044c4047de7302ab', '2024-09-30 10:53:18.445728', '2024-09-30 10:53:18.445728') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
  [1m[36mTea Load (0.2ms)[0m  [1m[34mSELECT "teas".* FROM "teas"[0m
  [1m[36mSubscription Load (0.2ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCustomer Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" = $1 LIMIT $2[0m  [["email", "john@example.com"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["first_name", "John"], ["last_name", "Doe"], ["email", "john@example.com"], ["address", "123 Tea St."], ["created_at", "2024-09-30 10:53:18.479130"], ["updated_at", "2024-09-30 10:53:18.479130"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" = $1 LIMIT $2[0m  [["email", "jane@example.com"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["first_name", "Jane"], ["last_name", "Smith"], ["email", "jane@example.com"], ["address", "456 Coffee Rd."], ["created_at", "2024-09-30 10:53:18.482037"], ["updated_at", "2024-09-30 10:53:18.482037"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTea Create (0.7ms)[0m  [1m[32mINSERT INTO "teas" ("title", "description", "temperature", "brew_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Green Tea"], ["description", "A refreshing and healthy green tea."], ["temperature", 80], ["brew_time", 3], ["created_at", "2024-09-30 10:53:18.486990"], ["updated_at", "2024-09-30 10:53:18.486990"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTea Create (0.6ms)[0m  [1m[32mINSERT INTO "teas" ("title", "description", "temperature", "brew_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Black Tea"], ["description", "A strong and bold black tea."], ["temperature", 95], ["brew_time", 4], ["created_at", "2024-09-30 10:53:18.489130"], ["updated_at", "2024-09-30 10:53:18.489130"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTea Create (0.7ms)[0m  [1m[32mINSERT INTO "teas" ("title", "description", "temperature", "brew_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Oolong Tea"], ["description", "A fragrant and fruity oolong tea."], ["temperature", 85], ["brew_time", 5], ["created_at", "2024-09-30 10:53:18.491079"], ["updated_at", "2024-09-30 10:53:18.491079"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSubscription Create (0.9ms)[0m  [1m[32mINSERT INTO "subscriptions" ("title", "price", "status", "frequency", "customer_id", "tea_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "Monthly Green Tea Subscription"], ["price", "15.0"], ["status", 0], ["frequency", "monthly"], ["customer_id", 1], ["tea_id", 1], ["created_at", "2024-09-30 10:53:18.499048"], ["updated_at", "2024-09-30 10:53:18.499048"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSubscription Create (0.7ms)[0m  [1m[32mINSERT INTO "subscriptions" ("title", "price", "status", "frequency", "customer_id", "tea_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "Weekly Black Tea Subscription"], ["price", "10.0"], ["status", 1], ["frequency", "weekly"], ["customer_id", 1], ["tea_id", 2], ["created_at", "2024-09-30 10:53:18.501259"], ["updated_at", "2024-09-30 10:53:18.501259"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Started POST "/api/v1/customers/1/subscriptions" for ::1 at 2024-09-30 04:56:57 -0600
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SubscriptionsController#create as */*
  Parameters: {"tea_id"=>3, "subscription"=>{"title"=>"A fragrant and fruity oolong tea.", "price"=>30.0, "frequency"=>"monthly", "status"=>"active"}, "customer_id"=>"1"}
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:47:in `set_customer'
  [1m[36mTea Load (0.7ms)[0m  [1m[34mSELECT "teas".* FROM "teas" WHERE "teas"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:6:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/services/subscription_service.rb:50:in `save_subscription'
  [1m[36mSubscription Create (1.8ms)[0m  [1m[32mINSERT INTO "subscriptions" ("title", "price", "status", "frequency", "customer_id", "tea_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "A fragrant and fruity oolong tea."], ["price", "30.0"], ["status", 0], ["frequency", "monthly"], ["customer_id", 1], ["tea_id", 3], ["created_at", "2024-09-30 10:56:57.516766"], ["updated_at", "2024-09-30 10:56:57.516766"]]
  ↳ app/services/subscription_service.rb:50:in `save_subscription'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/services/subscription_service.rb:50:in `save_subscription'
Completed 201 Created in 62ms (Views: 0.1ms | ActiveRecord: 33.9ms | Allocations: 32032)


Started GET "/api/v1/customers/1/subscriptions" for ::1 at 2024-09-30 04:58:05 -0600
Processing by Api::V1::SubscriptionsController#index as */*
  Parameters: {"customer_id"=>"1"}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:47:in `set_customer'
  [1m[36mSubscription Load (2.1ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions" WHERE "subscriptions"."customer_id" = $1[0m  [["customer_id", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:23:in `index'
  [1m[36mTea Load (0.3ms)[0m  [1m[34mSELECT "teas".* FROM "teas" WHERE "teas"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:23:in `index'
  [1m[36mTea Load (0.2ms)[0m  [1m[34mSELECT "teas".* FROM "teas" WHERE "teas"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:23:in `index'
  [1m[36mTea Load (1.7ms)[0m  [1m[34mSELECT "teas".* FROM "teas" WHERE "teas"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:23:in `index'
Completed 200 OK in 16ms (Views: 0.1ms | ActiveRecord: 4.6ms | Allocations: 3869)


Started PATCH "/api/v1/customers/1/subscriptions/1" for ::1 at 2024-09-30 04:58:47 -0600
Processing by Api::V1::SubscriptionsController#update as */*
  Parameters: {"subscription"=>{"status"=>"cancelled"}, "customer_id"=>"1", "id"=>"1"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:47:in `set_customer'
  [1m[36mSubscription Load (0.3ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions" WHERE "subscriptions"."customer_id" = $1 AND "subscriptions"."id" = $2 LIMIT $3[0m  [["customer_id", 1], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:52:in `set_subscription'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/services/subscription_service.rb:21:in `update'
  [1m[36mSubscription Update (1.2ms)[0m  [1m[33mUPDATE "subscriptions" SET "status" = $1, "updated_at" = $2 WHERE "subscriptions"."id" = $3[0m  [["status", 1], ["updated_at", "2024-09-30 10:58:47.382339"], ["id", 1]]
  ↳ app/services/subscription_service.rb:21:in `update'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/services/subscription_service.rb:21:in `update'
  [1m[36mTea Load (0.1ms)[0m  [1m[34mSELECT "teas".* FROM "teas" WHERE "teas"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/subscriptions_controller.rb:29:in `update'
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 2.4ms | Allocations: 3767)


  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (48.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "ivan_chai_subscription_service_development"[0m
  [1m[35m (31.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "ivan_chai_subscription_service_test"[0m
  [1m[35m (105.2ms)[0m  [1m[35mCREATE DATABASE "ivan_chai_subscription_service_development" ENCODING = 'unicode'[0m
  [1m[35m (43.9ms)[0m  [1m[35mCREATE DATABASE "ivan_chai_subscription_service_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "customers" CASCADE[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "customers" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "email" character varying NOT NULL, "address" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_customers_on_email" ON "customers" ("email")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "title" character varying NOT NULL, "price" decimal(8,2) NOT NULL, "status" integer DEFAULT 0 NOT NULL, "frequency" character varying NOT NULL, "customer_id" bigint NOT NULL, "tea_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_customer_id" ON "subscriptions" ("customer_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_tea_id" ON "subscriptions" ("tea_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "teas" CASCADE[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "teas" ("id" bigserial primary key, "title" character varying NOT NULL, "description" text NOT NULL, "temperature" integer NOT NULL, "brew_time" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_66eb6b32c1"
FOREIGN KEY ("customer_id")
  REFERENCES "customers" ("id")
[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_8184821090"
FOREIGN KEY ("tea_id")
  REFERENCES "teas" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20240927135524)[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20240927135410),
(20240927135301);[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-09-30 10:59:59.007651', '2024-09-30 10:59:59.007654') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '7e22e0cb923796294d56a72c044c4047de7302ab', '2024-09-30 10:59:59.009572', '2024-09-30 10:59:59.009572') RETURNING "key"[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "customers" CASCADE[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "customers" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "email" character varying NOT NULL, "address" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_customers_on_email" ON "customers" ("email")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "title" character varying NOT NULL, "price" decimal(8,2) NOT NULL, "status" integer DEFAULT 0 NOT NULL, "frequency" character varying NOT NULL, "customer_id" bigint NOT NULL, "tea_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_customer_id" ON "subscriptions" ("customer_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_tea_id" ON "subscriptions" ("tea_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "teas" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "teas" ("id" bigserial primary key, "title" character varying NOT NULL, "description" text NOT NULL, "temperature" integer NOT NULL, "brew_time" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_66eb6b32c1"
FOREIGN KEY ("customer_id")
  REFERENCES "customers" ("id")
[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_8184821090"
FOREIGN KEY ("tea_id")
  REFERENCES "teas" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20240927135524)[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20240927135410),
(20240927135301);[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-09-30 10:59:59.038955', '2024-09-30 10:59:59.038956') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2024-09-30 10:59:59.040035' WHERE "ar_internal_metadata"."key" = 'environment'[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '7e22e0cb923796294d56a72c044c4047de7302ab', '2024-09-30 10:59:59.040838', '2024-09-30 10:59:59.040839') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
  [1m[36mTea Load (0.1ms)[0m  [1m[34mSELECT "teas".* FROM "teas"[0m
  [1m[36mSubscription Load (0.2ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCustomer Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" = $1 LIMIT $2[0m  [["email", "john@example.com"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["first_name", "John"], ["last_name", "Doe"], ["email", "john@example.com"], ["address", "123 Tea St."], ["created_at", "2024-09-30 10:59:59.075978"], ["updated_at", "2024-09-30 10:59:59.075978"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" = $1 LIMIT $2[0m  [["email", "jane@example.com"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["first_name", "Jane"], ["last_name", "Smith"], ["email", "jane@example.com"], ["address", "456 Coffee Rd."], ["created_at", "2024-09-30 10:59:59.078946"], ["updated_at", "2024-09-30 10:59:59.078946"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTea Create (0.8ms)[0m  [1m[32mINSERT INTO "teas" ("title", "description", "temperature", "brew_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Green Tea"], ["description", "A refreshing and healthy green tea."], ["temperature", 80], ["brew_time", 3], ["created_at", "2024-09-30 10:59:59.083870"], ["updated_at", "2024-09-30 10:59:59.083870"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTea Create (0.6ms)[0m  [1m[32mINSERT INTO "teas" ("title", "description", "temperature", "brew_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Black Tea"], ["description", "A strong and bold black tea."], ["temperature", 95], ["brew_time", 4], ["created_at", "2024-09-30 10:59:59.086329"], ["updated_at", "2024-09-30 10:59:59.086329"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTea Create (0.8ms)[0m  [1m[32mINSERT INTO "teas" ("title", "description", "temperature", "brew_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Oolong Tea"], ["description", "A fragrant and fruity oolong tea."], ["temperature", 85], ["brew_time", 5], ["created_at", "2024-09-30 10:59:59.088530"], ["updated_at", "2024-09-30 10:59:59.088530"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSubscription Create (1.0ms)[0m  [1m[32mINSERT INTO "subscriptions" ("title", "price", "status", "frequency", "customer_id", "tea_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "Monthly Green Tea Subscription"], ["price", "15.0"], ["status", 0], ["frequency", "monthly"], ["customer_id", 1], ["tea_id", 1], ["created_at", "2024-09-30 10:59:59.097186"], ["updated_at", "2024-09-30 10:59:59.097186"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSubscription Create (0.7ms)[0m  [1m[32mINSERT INTO "subscriptions" ("title", "price", "status", "frequency", "customer_id", "tea_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "Weekly Black Tea Subscription"], ["price", "10.0"], ["status", 1], ["frequency", "weekly"], ["customer_id", 1], ["tea_id", 2], ["created_at", "2024-09-30 10:59:59.099564"], ["updated_at", "2024-09-30 10:59:59.099564"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
